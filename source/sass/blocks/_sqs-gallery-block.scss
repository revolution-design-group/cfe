/******************************************************************************
 * Squarespace Block - Gallery
 *
 * Custom CSS styles that relate to Squarespace Gallery Blocks.
*******************************************************************************/


/* GALLERY BLOCK SLIDESHOW - non-blog */
/***************************/

$img-displacementX: 40px;
$img-displacementY: $img-displacementX;
$img-width: 35%;

@mixin slideshow-mb($base) {
    margin-bottom: $base * 2;
}

@mixin fn-position-video-icon($width, $dispX, $dispY){
    @include calc(left, "#{$width} /2 + #{$dispX}");
    @include calc(top, "50% + #{$dispY}");
    //transform         : translateY(calc(-50% - #{$dispY}));
    //-webkit-transform : translateY(-webkit-calc(-50% - #{$dispY}));
    //-moz-transform    : translateY(moz-calc(-50% - #{$dispY}));
    //-ms-transform     : translateY(-ms-calc(-50% - #{$dispY}));
}
body:not(.collection-type-blog){
    .sqs-gallery-block-slideshow {
        background-color: transparent;
        @include slideshow-mb($img-displacementY);
        @media screen and (max-width: 1400px ){ @include slideshow-mb(3/4 * $img-displacementY); }
        @media screen and (max-width: 1080px ){ @include slideshow-mb(1/2 * $img-displacementY); }
        @media screen and (max-width: 640px ){ @include slideshow-mb(3/8 * $img-displacementY); }  

        img{ @extend .subtle-box-shadow; }

        /* set height/width of the gallery section */
        .sqs-gallery-design-stacked {
            height: 0 !important;
            padding-bottom: 26%;
        }

        /* img-wrapper class (injected) used to add floating line frame behind img */
        .img-wrapper{
            width: $img-width;
            height: auto;
            //height: 85%;
            overflow: visible !important;
            border: 1px solid rgba(255,255,255,.5);
            img{
                max-width: 100% !important;
                height: auto !important;
                left: $img-displacementX !important;
                top: $img-displacementY !important;
                @media screen and (max-width: 1400px ){
                    left: 3/4 * $img-displacementX !important;
                    top: 3/4 * $img-displacementY !important;
                }
                @media screen and (max-width: 1080px ){
                    left: 1/2 * $img-displacementX !important;
                    top: 1/2 * $img-displacementY !important;
                }
                @media screen and (max-width: 640px ){
                    left: 3/8 * $img-displacementX !important;
                    top: 3/8 * $img-displacementY !important;
                }
            }
        }
        /* // Second way that uses background image
        .slide img{
            background-image: $white-box;
            background-repeat: no-repeat;
            background-position: left top;
            background-size: 85.185% 81.8182%;
            background-size: 90% 90%;

            padding: 4% 0px 0px 5%;
            width: 50% !important;
            height: auto !important;

            @include vertically-centered(absolute);
            position: absolute !important;
        }*/


        /* Title and Description */
        .meta{
            height: auto !important;
            max-width: 50% !important;
            text-shadow: 0 0 7.5px hsla(0,0%,8%,.4);
            background-color: transparent;
            .meta-inside:before{
                content: "";
                display: block;
                width: 55px;
                height: 4px;
                background-color: white;
                margin-bottom: 25px;
            }
            .meta-description p{
                font-size: 16px;
            }
            .meta-title{
                font-family: alternate-gothic-no-2-d;
                font-weight: 400;
                font-style: normal;
                letter-spacing: .05em;
                color:white;
                font-size: 35px;
                //font-size: 2.1vw;
                text-transform: uppercase;

                &:before{
                  font-family: proxima-nova;
                  font-weight: 300;
                  font-style: normal;
                  letter-spacing: 0.04em;
                  text-transform: uppercase;
                  line-height: 1em;
                  margin-bottom: .5em;
                  font-size: .6em;
                  display: block;
                }
            }
        }



        /* Videos */
        .sqs-video-overlay,
        .sqs-gallery-design-stacked-slide{
            overflow: visible !important;
        }
        .sqs-video-wrapper .sqs-video-overlay .sqs-video-icon{
            left: $img-width * .6; //fallback
            top: $img-width * 1.3; //fallback
            @include fn-position-video-icon($img-width, $img-displacementX, $img-displacementY);
            @media screen and (max-width: 1400px ){
                @include fn-position-video-icon($img-width, 3/4 * $img-displacementX, 3/4 * $img-displacementY);
            }
            @media screen and (max-width: 1080px ){
                @include fn-position-video-icon($img-width, 1/2 * $img-displacementX, 1/2 * $img-displacementY);
            }
            @media screen and (max-width: 640px ){
                @include fn-position-video-icon($img-width, 3/8 * $img-displacementX, 3/8 * $img-displacementY);
            }
        }

        /* Controls */
        .sqs-gallery-controls .previous{ left: -3.5%; }
        .sqs-gallery-controls .next{ right: -3.5%; }
    }

    /* Position the img and text */
    .sqs-block-gallery .sqs-gallery-block-slideshow.sqs-gallery-block-meta-position-bottom-right,
    .sqs-block-gallery .sqs-gallery-block-slideshow.sqs-gallery-block-meta-position-top-right{
        .img-wrapper{  float: left; }
        .meta{  left: 50% !important; right: initial !important; }
    }
    .sqs-block-gallery .sqs-gallery-block-slideshow.sqs-gallery-block-meta-position-bottom-left,
    .sqs-block-gallery .sqs-gallery-block-slideshow.sqs-gallery-block-meta-position-top-left{
        .img-wrapper{ float: right; }
        .meta{ left: 0 !important; }
    }

        /* Thumbnail Stirp */
    .sqs-block-gallery .sqs-gallery-block-slideshow + .sqs-gallery-design-strip{
        overflow: visible;
        .sqs-gallery-design-strip-slide{
            padding: 0 20px;
            &:first-of-type{ margin-left: 0; }
            &:last-of-type{ margin-right: 0; }
        }
        img:not(.sqs-gallery-design-strip-slide){ @extend .subtle-box-shadow; }
    }
}


/* GALLERY BLOCK SLIDESHOW - for blogs */
/***************************/







/* GALLERY BLOCK [TYPE] */
/***************************/
